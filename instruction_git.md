# **Инструкция по работе с системой контроля версий Git**

![Эмблема Git](git.jpg)

Git (произносится «гит») — распределённая система управления версиями. Проект был создан Линусом Торвальдсом для управления разработкой ядра Linux, первая версия выпущена 7 апреля 2005 года. На сегодняшний день его поддерживает Джунио Хамано.

## Инициализация репозитория

Чтобы создать (инициализировать) новый репозиторий нужно в терминале ввести команду:

    git init

Репозиторий будет создан в той папке, из которой вызывалась команда

## Проверка состояния репозитория

Чтобы проверить текущее состояние репозитория нужно ввести в терминале команду:

    git status

## Добавление изменения к отслеживанию версионности

Чтобы добавить сделанное изменение к отслеживанию (поместить в индекс) нужно ввести команду:

    git add <имя файла>

где вместо <имя файла> вводится путь к файлу относительно расположения репозитория.

## Фиксация изменений

Чтобы зафиксировать изменение используется команда:

    git commit

В таком случае откроется окно для ввоба краткого описания сделанных изменений.

Чтобы сделать это одновременно с фиксацией используется команда:

    git commit -m "комментарий"

## Просмотр истории изменений

Чтобы посмотреть историю изменений используется комада

    git log

Для просмотра изменений с выводом одного коммита в одну строку используется команда

    git log --oneline

Для просмотра всех имеющихся коммитов используется команда

    git log --all

Для просмотра лога с графическим изображением веток используется команда

    git log --graph

Все указанные флаги могут использоваться вместе:

    git log --all --oneline --graph

## Просмотр различий между изменениями

Для просмотра отличий между текущим состоянием репозитория и последним сохраненным изменением используется команда

    git diff

Можно также посмотреть разницу между любыми двуми коммитами. Для этого используется команда

    git diff <хэш1> <хэш2>

## Переключение на нужное изменение

Чтобы переключиться на нужный коммит используется команда

    git checkout <хэш>

## Ветки в Git

### Создание новой ветки

Чтобы создать новую ветку используется команда

    git branch <имя_ветки>

### Просмотр всех веток

Чтобы посмотреть какие ветки существуют и на какой мы находимся используется команда

    git branch

### Переключение между ветками

Чтобы переключиться на другую ветку используется команда

    git checkout <имя_ветки>

### Слияние веток

Чтобы влить одну ветку в другую необходимо находясь в целевой ветке (КУДА будем делать слияние) выполнить команду

    git merge <имя_вливаемой_ветки>

### Конфликты при слиянии

Если одна и та же строка в разный версиях записана по разному возникнет конфликт.
Чистый гит автоматически сохраняет оба изменения, далее требуется вручную внести нужные правки и сделать коммит.

VSСode дает возможность выбрать какое изменение сохранить (входящее, существующее или оба).

### Удаление ветки

Чтобы удалить ветку, которая больше не нужно (например после слияния) используется команда

    git branch -d <имя_ветки>

## Удаленные репозитории

Для того, чтобы внести вклад в какой-либо Git-проект, необходимо уметь работать с удалёнными репозиториями. Удалённые репозитории представляют собой версии проектов, сохранённые в интернете или ещё где-то в сети. В настоящее время большинство разработчиков используют сервис хостинга удаленных репозиториев GitHub.  

Удаленный репозиторий - полноценный репозиторий, ничем не отличающийся от локального. У удаленного репозитория есть собственные ветки, собственный указатель HEAD, своя история коммитов и так далее. 

Удаленный репозиторий позволяет работать с проектом с любого компьютера с доступом в интернет. Загружать к себе последние обновления проекта, направлять результаты своей работы/делиться своими идеями. 

Это невероятно полезная штука! 

### Связывание локального репозитория с удаленным

Для того, чтобы иметь возможность выгрузить уже проделанную работу на удаленный сервер или заниматься разработкой с нескольких компьютеров, необходимо связать локальный и удаленный резозиторий. 

Рассмотрим один из способов это сделать на примере работы с GitHub.

Необходимо зайти в свой аккаунт на GitHub, перейти в раздел "Your repositories" (см. рис.1) и нажать кнопку "New" (см.рис.2).

Рисунок 1.

![Рисунок 1](screen1.JPG)

Рисунок 2.

![Рисунок 2](screen2.JPG)

Вводим имя нового репозитория, устанавливаем требуемые параметры публичности,  используем - при необходимости - другие настройки, которые позволяет выполнить GitHub (лицензирование, добавление файла gitignore и т.д.) и нажимаем кнопку "Create repository". 

Далее GitHub подскажет возможные варианты работы с созданным репозиторием.
Рассмотрим вариант, когда нам необходимо загрузить локальный репозиторий в свой аккаунт на GitHub. Для этого воспользуемся подсказкой "... or push an existing repository from the command line" (см. рис.3)

Рисунок 3.

![Рисунок 3](screen3.JPG)

Возвращаемся в VSCode, в терминале __*последовательно*__ выполняем команды из подсказки

    git remote add origin https://github.com/HelgaSen/repos_name.git

В данной команде origin - имя удаленного репозитория. Впоследствии, при работе с этим удаленным репозиторием, мы будем обращаться к нему по этому придуманному имени. Принято называть удаленный репозиторий origin, но строго говоря, никаких ограничений здесь нет.

Далее следует ссылка на удаленный репозиторий. В нашем случае, её генерирует GitHub.

При выполнении следующей команды из подсказки, следует обратить внимание на наименование главной ветки в вашем лоальном репозитории. В нашем случае, главная ветка называется master, поэтому команда будет выглядеть так:

    git branch -M master

Атрибут -M позволяет присвоить главной ветке удаленного репозитория то же имя, что и в локальном репозитории.

И, наконец, для того, чтобы передать содержимое главной ветки локального репозитория в удаленный, используем команду 

    git push -u origin master

Готово. Удаленная версия вашего локального репозитория доступна для просмотра/редактирования на GitHub или, другими словами, локальный репозиторий и удаленный - связаны. 

Обратите внимание, если вы впервые работаете с GitHub и впервые ввели в терминале **git push**, потребуется пройти разовую "ознакомительную" авторизацию, введя учетные данные аккаунта на GitHub.

### Отправка изменений в удаленный репозиторий

Для того, чтобы загрузить в удаленный репозиторий изменения, сделанные в связанном локальном репозитории, используется команда
    
    git push

Если в удаленном репозитории нет коммитов сделанных после наших, то все пройдет нормально.

Если в удаленном репозитории есть коммиты, которые были сделаны позже наших, то команда завершится с ошибкой. Ведь в этом случае есть угроза перезаписи истории удаленного репозитория и удаления всех коммитов, созданных позже наших.

В данном случае терминал даст подсказку, что необходимо предварительно получить изменения из удаленного репозитория.

### Получение изменений из удаленного репозитория

Для синхронизации локальной рабочей копии и всех ссылочных объектов с удаленным репозиторием используется команда 

    git pull

Другими словами, данная команда позволяет загрузить последние изменения и обновить свою рабочую копию до состояния удаленного репозитория.

### Клонирование удаленного репозитория

Чтобы начать работать над уже существующим проектом или получить доступ к своему репозиторию с другого компьютера, GitHub позволяет склонировать удаленный репозиторий к себе на компьютер. Операция клонирования создаёт на локальном компьютере точную копию удаленного репозитория.

Для выполнения этой операции необходимо использовать команду

    git clone

Создаем на локальном компьютере новую папку, куда хотим склонировать удаленный репозиторий.
Открываем её в VSCode. 
Для клонироваения репозитория необходимо скопировать ссылку на этот репохиторий с GitHub (см. рис.4).

Откройте в GitHub интересующий репозиторий. Ссылка доступна по кнопке "<> Code"

Рисунок 4.

![Рисунок 4](screen4.JPG)

В терминале вводим нужную команду, добавив ссылку на удаленный репозиторий. Например,

    git clone https://github.com/HelgaSen/workshop3.git

Готово! Репозиторий склонирован.

Для дальнейшей работы с ним необходимо перейти непосредственно в отслеживаемую папку.
Для этого в терминале вводим команду

    cd <Cloned_repos_name>

### Создание форка репозитория на GitHub

Если просто склонировать себе чужой репозиторий, то не будет возможности предложить хозяину удаленного репозитория свои идеи и изменения. Для того, чтобы была возможность отправить запрос с предложением изменений, необходимо предварительно "форкнуть" удаленный репозиторий другого человека. 

Форк (от англ. fork – вилка) – точная копия репозитория, но в нашем аккаунте. Форки нужны, чтобы вносить свои изменения в проект, к репозиторию которого у нас нет прямого доступа.

Для того, чтобы "форкнуть" чужой репозиторий, необходимо зайти в чужой аккаунт на GitHub и нажать на кнопку "Fork" (см.рис.5).

Рисунок 5.

![Рисунок 5](screen5.JPG)

После этого указанный репозиторий будет открыт в нашем аккаунте. Имя пользователя изменилось, наименование репозитория то же. Указано, от кого этот репозиторий скопирован (см. рис.6).

Рисунок 6.

![Рисунок 6](screen6.JPG)

### Запрос на внесение изменений в закрытый репозиторий. Pull-request.

После того, как репозиторий "форкнут" в наш аккаунт, можно его склонировать, как описано выше и работать с ним локально.

Если мы хотим предложить наши изменения хозяину закрытого удаленного репозитория, то необходимо создать отделную ветку/ветки. Внести изменения локально у себя в склонированном репозитории, зафиксировать их, отправить с помощью команды **git push** в форк в своем аккаунте, после чего отправить Pull-request.

Pull-request - это функция GitHub, позволяющая попросить владельца репозитория, от которого мы сделали форк, загрузить наши изменения обратно в свой репозиторий.

Для того, чтобы воспользоваться этой функцией, необходимо нажать на кнопку "Compare & pull request" или "Open pull request" (см. рис. 7).

Рисунок 7.

![Рисунок 7](screen7.JPG)

## Вместо эпилога

Как сказал один умный человек: "Вряд ли даже создатели Git на 100% знают все возможности Git".

Очевидно, что это действительно так. 

И, тем не менее, сам Git и GitHub завораживают своими возможностями.

Можно вносить свой вклад в абсолютно любые приложения с открытым программным кодом. Даже репозиторий самого Git хранится на GitHub, и в любой момент можно сделать форк и придумать новую команду (и возможно даже, что ответственный примет пулл-реквест=)). Можно внести свой вклад в разработку ядра Linux, в VSCode, в ядро криптовалюты Bitcoin, в языки программирования Python, Go, Ruby – все эти проекты имеют открытые репозитории на GitHub.

Ну круто же! =^__^=







